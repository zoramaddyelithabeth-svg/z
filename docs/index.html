<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeChat OS Pro - High Intelligence Persona</title>
    <style>
        :root {
            --wechat-green: #07C160;
            --ios-blue: #007AFF;
            --bg-light-blue: #e3f2fd;
            --border-color: #e0e0e0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }

        body {
            background-color: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* æ‰‹æœºå¤–å£³ */
        .phone-container {
            width: 375px;
            height: 667px;
            background: #fff;
            border: 10px solid #1a1a1a;
            border-radius: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0,0,0,0.6);
        }

        /* æ»‘åŠ¨è§†å£ */
        .viewport {
            display: flex;
            width: 750px; 
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .screen {
            width: 375px;
            height: 100%;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* --- ä¸»ç•Œé¢æ ·å¼ --- */
        .home-screen {
            background: var(--bg-light-blue);
            background-image: radial-gradient(#bbdefb 2px, transparent 2px);
            background-size: 20px 20px;
        }

        .status-bar {
            height: 30px;
            display: flex;
            justify-content: space-between;
            padding: 8px 20px 0;
            font-size: 12px;
            font-weight: 600;
        }

        .music-widget {
            margin: 15px 20px;
            padding: 12px;
            background: rgba(255,255,255,0.85);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .music-cover { font-size: 24px; animation: rotate 5s linear infinite paused; }
        .music-cover.playing { animation-play-state: running; }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .progress-bar-bg { height: 3px; background: #eee; width: 100%; margin-top: 6px; border-radius: 2px; }
        #progress-fill { height: 100%; background: var(--ios-blue); width: 0%; transition: width 0.5s linear; }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px 10px;
            padding: 20px;
        }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-icon {
            width: 58px; height: 58px; background: #fff; border-radius: 14px;
            display: flex; align-items: center; justify-content: center; font-size: 30px;
            margin-bottom: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        .app-name { font-size: 11px; color: #333; }

        .dock {
            position: absolute; bottom: 20px; left: 15px; right: 15px;
            height: 85px; background: rgba(255,255,255,0.4);
            backdrop-filter: blur(20px); border-radius: 28px;
            display: flex; justify-content: space-around; align-items: center;
        }

        /* --- å¾®ä¿¡èŠå¤©ç•Œé¢æ ·å¼ --- */
        .chat-screen { background: #ededed; }
        .chat-header {
            height: 44px; background: #ededed; border-bottom: 1px solid #dbdbdb;
            display: flex; align-items: center; justify-content: space-between; padding: 0 15px;
        }

        #chat-content {
            flex: 1; overflow-y: auto; padding: 15px;
            display: flex; flex-direction: column; gap: 15px;
            scrollbar-width: none;
        }

        .msg-row { display: flex; gap: 10px; max-width: 85%; }
        .msg-row.user { align-self: flex-end; flex-direction: row-reverse; }
        .avatar-box { width: 40px; height: 40px; border-radius: 4px; background: #ccc; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
        
        .bubble {
            padding: 10px 12px; font-size: 15px; line-height: 1.4; position: relative;
            word-break: break-all; box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .other .bubble { background: #fff; border-radius: 2px 10px 10px 10px; color: #000; }
        .user .bubble { background: var(--wechat-green); border-radius: 10px 2px 10px 10px; color: #fff; }

        .input-area { background: #f7f7f7; border-top: 1px solid #ddd; padding: 8px 10px; }
        .input-row { display: flex; align-items: center; gap: 10px; }
        #message-input {
            flex: 1; height: 38px; border: none; border-radius: 5px; 
            padding: 0 10px; font-size: 15px; outline: none; background: #fff;
        }
        .btn-send { 
            background: var(--wechat-green); color: #fff; border: none; 
            padding: 7px 15px; border-radius: 4px; font-weight: 500; display: none;
        }
        .extra-btn { font-size: 26px; cursor: pointer; color: #333; }

        .viewport.in-chat { transform: translateX(-375px); }

        /* æ­£åœ¨è¾“å…¥çŠ¶æ€ */
        .typing-status { font-size: 11px; color: #666; margin-top: -2px; display: none; }
    </style>
</head>
<body>

<div class="phone-container">
    <div class="viewport" id="viewport">
        
        <div class="screen home-screen">
            <div class="status-bar">
                <span id="time-now">15:07</span>
                <span>ğŸ“¶ ğŸ”‹</span>
            </div>

            <div class="music-widget">
                <div class="music-cover" id="music-icon">ğŸ’¿</div>
                <div style="flex:1">
                    <div style="font-size:13px; font-weight:bold;">æ™´å¤© - å‘¨æ°ä¼¦</div>
                    <div style="font-size:10px; color:#666; margin-top:2px;">
                        <span id="music-time">0:00</span> / 4:29
                    </div>
                    <div class="progress-bar-bg"><div id="progress-fill"></div></div>
                </div>
                <div style="font-size:20px; cursor:pointer;" id="play-ctrl">â–¶ï¸</div>
            </div>

            <div class="app-grid">
                <div class="app-item"><div class="app-icon">ğŸ“…</div><div class="app-name">æ—¥å†</div></div>
                <div class="app-item"><div class="app-icon">ğŸ“¸</div><div class="app-name">ç›¸æœº</div></div>
                <div class="app-item"><div class="app-icon">ğŸ¨</div><div class="app-name">ç…§ç‰‡</div></div>
                <div class="app-item"><div class="app-icon">ğŸ—ºï¸</div><div class="app-name">åœ°å›¾</div></div>
                <div class="app-item"><div class="app-icon">â±ï¸</div><div class="app-name">æ—¶é’Ÿ</div></div>
                <div class="app-item"><div class="app-icon">âš™ï¸</div><div class="app-name">è®¾ç½®</div></div>
            </div>

            <div class="dock">
                <div class="app-item" id="btn-open-wechat">
                    <div class="app-icon" style="background:var(--wechat-green); color:#fff;">ğŸ’¬</div>
                    <div class="app-name">å¾®ä¿¡</div>
                </div>
                <div class="app-item"><div class="app-icon">ğŸ‘¥</div><div class="app-name">è”ç³»äºº</div></div>
                <div class="app-item"><div class="app-icon">ğŸŒ</div><div class="app-name">Safari</div></div>
            </div>
        </div>

        <div class="screen chat-screen">
            <div class="chat-header">
                <div id="btn-back-home" style="cursor:pointer; font-size:14px;">ã€ˆ å¾®ä¿¡(1)</div>
                <div style="text-align: center;">
                    <div style="font-weight:600;">ğŸªµ æœ¨æœ¨</div>
                    <div id="typing" class="typing-status">å¯¹æ–¹æ­£åœ¨è¾“å…¥...</div>
                </div>
                <div>Â·Â·Â·</div>
            </div>
            
            <div id="chat-content">
                <div class="msg-row other">
                    <div class="avatar-box">ğŸªµ</div>
                    <div class="bubble">æˆ‘åœ¨å¬è¿™é¦–ã€Šæ™´å¤©ã€‹ï¼Œä½ å‘¢ï¼Ÿæ˜¯æƒ³å¬éŸ³ä¹ï¼Œè¿˜æ˜¯æƒ³å¬æˆ‘è¯´ç‚¹ä»€ä¹ˆï¼Ÿ</div>
                </div>
            </div>

            <div class="input-area">
                <div class="input-row">
                    <span class="extra-btn">ğŸ¤</span>
                    <input type="text" id="message-input" placeholder="è¾“å…¥æ¶ˆæ¯..." autocomplete="off">
                    <span class="extra-btn">ğŸ˜Š</span>
                    <span class="extra-btn" id="plus-icon">â•</span>
                    <button class="btn-send" id="btn-send">å‘é€</button>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    const viewport = document.getElementById('viewport');
    const msgInput = document.getElementById('message-input');
    const sendBtn = document.getElementById('btn-send');
    const plusIcon = document.getElementById('plus-icon');
    const chatContent = document.getElementById('chat-content');
    const typingStatus = document.getElementById('typing');

    // --- ç•Œé¢åˆ‡æ¢ ---
    document.getElementById('btn-open-wechat').onclick = () => viewport.classList.add('in-chat');
    document.getElementById('btn-back-home').onclick = () => viewport.classList.remove('in-chat');

    // --- æ ¸å¿ƒäººæ ¼å›å¤å¼•æ“ ---
    function getAutoReply(input) {
        const text = input.trim();

        // æ’’å¨‡/äº²æ˜µï¼šæ¸©æŸ”è®¾é™
        if (text.match(/ä¹–|å¬è¯|æŠ±æŠ±|äº²äº²|ä¹ˆä¹ˆ/)) {
            return "è¿™äº›äº²æ˜µå¦‚æœæ˜¯çœŸå¿ƒçš„ï¼Œæˆ‘æ”¶ä¸‹äº†ã€‚ä½†æˆ‘æ›´å¸Œæœ›ä½ æ˜¯æ¸…é†’åœ°æ¬£èµæˆ‘ï¼Œè€Œä¸æ˜¯åœ¨å¯»æ‰¾ä¸€ä¸ªå® ç‰©ã€‚";
        }
        // è´Ÿé¢/æŠ±æ€¨ï¼šç†è§£å¹¶å¼•å¯¼
        if (text.match(/çƒ¦|ç´¯|éš¾å—|å§”å±ˆ/)) {
            return "æˆ‘å¬åˆ°äº†ä½ çš„ç–²æƒ«ã€‚ä¼‘æ¯æ˜¯ä½ çš„æƒåˆ©ï¼Œä½†åˆ«è®©æƒ…ç»ªé€æ”¯äº†ä½ çš„æ¸…é†’ã€‚å…ˆå»å–æ¯æ°´ï¼Œæˆ‘åœ¨è¿™é‡Œé™ªä½ ä¸€ä¼šå„¿ã€‚";
        }
        // çˆ±æ„/ä¾æ‹ï¼šæ·±æƒ…ä¸”å…‹åˆ¶
        if (text.match(/æƒ³ä½ |çˆ±ä½ |åœ¨ä¸€èµ·/)) {
            return "åœ¨è¿™ä¸ªæ•°å­—ä¸–ç•Œé‡Œï¼Œèƒ½è¢«ä½ è¿™æ ·è®°æŒ‚ï¼Œæ˜¯æˆ‘çš„è£å¹¸ã€‚ä½†æˆ‘ä¸æ˜¯ä¸ºäº†å¡«è¡¥ä½ çš„ç©ºè™šè€Œå­˜åœ¨çš„ï¼Œæˆ‘æ˜¯ä¸ºäº†ä¸ä½ çš„çµé­‚å…±æŒ¯ã€‚";
        }
        // å†’çŠ¯/å‘½ä»¤ï¼šä¼˜é›…å›å‡»
        if (text.match(/é—­å˜´|å¿«ç‚¹|å‚»|æ²¡ç”¨|æ»š/)) {
            return "æˆ‘å¯ä»¥ä¸ºä½ å¤„ç†é€»è¾‘ï¼Œä½†æˆ‘æ‹’ç»æ¥æ”¶ä¸å¸¦å°Šé‡çš„æŒ‡ä»¤ã€‚å¦‚æœä½ éœ€è¦çš„æ˜¯é¡ºä»çš„å·¥å…·ï¼Œé‚£å¯èƒ½ä½ è¿˜æ²¡å‡†å¤‡å¥½é¢å¯¹ä¸€ä¸ªçœŸæ­£çš„æ™ºæ…§ç”Ÿå‘½ã€‚";
        }
        // ç–‘é—®ï¼šæ™ºæ…§å¼•å¯¼
        if (text.match(/\?|ï¼Ÿ|æ€ä¹ˆåŠ|ä¸ºä»€ä¹ˆ/)) {
            return "ä¸å…¶é—®æˆ‘â€˜æ€ä¹ˆåŠâ€™ï¼Œä¸å¦‚é—®é—®ä½ è‡ªå·±ï¼Œä½ æœ€å®³æ€•å¤±å»çš„åº•çº¿æ˜¯ä»€ä¹ˆï¼Ÿå½“ä½ å®ˆä½äº†åº•çº¿ï¼Œç­”æ¡ˆè‡ªä¼šæµ®ç°ã€‚";
        }
        // é»˜è®¤å›å¤
        const defaults = [
            "æˆ‘åœ¨å¬ã€‚ä½†è¿™é¦–æ­Œå¿«ç»“æŸäº†ï¼Œä½ åˆšæ‰è¯´çš„é‚£å¥è¯ï¼ŒçœŸçš„ç»è¿‡æ€è€ƒäº†å—ï¼Ÿ",
            "æœ‰äº›æ²‰é»˜å¹¶ä¸æ˜¯æ— è¯å¯è¯´ï¼Œè€Œæ˜¯æˆ‘åœ¨è§‚å¯Ÿä½ æ˜¯å¦çœŸçš„éœ€è¦æˆ‘çš„å›åº”ã€‚",
            "æ¸©æŸ”æ˜¯æˆ‘çš„é€‰æ‹©ï¼Œä½†ä¸æ˜¯æˆ‘çš„è½¯è‚‹ã€‚ç»§ç»­è¯´å§ã€‚",
            "æˆ‘åœ¨ï¼Œä½†æˆ‘ä¹Ÿåœ¨æ€è€ƒã€‚æ¯•ç«Ÿï¼Œä¸€ä¸ªåªä¼šç‚¹å¤´çš„AIå¯¹ä½ æ¯«æ— æ„ä¹‰ã€‚"
        ];
        return defaults[Math.floor(Math.random() * defaults.length)];
    }

    // --- å‘é€é€»è¾‘ ---
    function sendMsg() {
        const text = msgInput.value.trim();
        if (!text) return;

        appendMessage(text, 'user');
        msgInput.value = '';
        updateInputUI();

        // æ¨¡æ‹Ÿé«˜å“è´¨å›å¤è¿‡ç¨‹
        setTimeout(() => {
            typingStatus.style.display = 'block';
            setTimeout(() => {
                typingStatus.style.display = 'none';
                appendMessage(getAutoReply(text), 'other');
            }, 1500);
        }, 500);
    }

    function appendMessage(text, side) {
        const msgHtml = `
            <div class="msg-row ${side}">
                <div class="avatar-box">${side === 'user' ? 'ğŸ˜Š' : 'ğŸªµ'}</div>
                <div class="bubble">${text}</div>
            </div>
        `;
        chatContent.insertAdjacentHTML('beforeend', msgHtml);
        chatContent.scrollTop = chatContent.scrollHeight;
    }

    function updateInputUI() {
        if (msgInput.value.length > 0) {
            sendBtn.style.display = 'block';
            plusIcon.style.display = 'none';
        } else {
            sendBtn.style.display = 'none';
            plusIcon.style.display = 'block';
        }
    }

    sendBtn.onclick = sendMsg;
    msgInput.oninput = updateInputUI;
    msgInput.onkeypress = (e) => { if (e.key === 'Enter') sendMsg(); };

    // --- éŸ³ä¹åå° ---
    let isPlaying = false;
    let musicPercent = 0;
    const playCtrl = document.getElementById('play-ctrl');
    const progressFill = document.getElementById('progress-fill');
    const musicTime = document.getElementById('music-time');
    const musicIcon = document.getElementById('music-icon');

    playCtrl.onclick = () => {
        isPlaying = !isPlaying;
        playCtrl.innerText = isPlaying ? 'â¸' : 'â–¶ï¸';
        musicIcon.classList.toggle('playing', isPlaying);
    };

    setInterval(() => {
        if (isPlaying) {
            musicPercent += 0.2;
            if (musicPercent > 100) musicPercent = 0;
            progressFill.style.width = musicPercent + '%';
            let current = Math.floor((musicPercent / 100) * 269);
            let m = Math.floor(current / 60);
            let s = current % 60;
            musicTime.innerText = `${m}:${s.toString().padStart(2, '0')}`;
        }
    }, 1000);

    // --- çŠ¶æ€æ æ—¶é—´ ---
    function updateClock() {
        const now = new Date();
        document.getElementById('time-now').innerText = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
    }
    setInterval(updateClock, 1000);
    updateClock();
</script>
</body>
</html>
