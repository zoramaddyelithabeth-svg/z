<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeChat OS Final Pro</title>
    <style>
        :root {
            --wechat-green: #07C160;
            --ios-blue: #007AFF;
            --calendar-purple: #8E44AD;
            --contact-blue: #3498DB;
            --bg-gray: #ededed;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
        body { background: #222; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }

        /* æ‰‹æœºå£³ */
        .phone-container {
            width: 375px; height: 667px; background: #fff;
            border: 10px solid #1a1a1a; border-radius: 40px;
            position: relative; overflow: hidden;
            box-shadow: 0 25px 50px rgba(0,0,0,0.6);
        }

        /* è·¯ç”±å®¹å™¨ - ç¡®ä¿ä¸åç§» */
        .viewport {
            display: flex; width: 1500px; height: 100%;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateX(0);
        }

        .screen { width: 375px; height: 100%; flex-shrink: 0; display: flex; flex-direction: column; position: relative; overflow: hidden; }

        /* --- 1. æ¡Œé¢ (Home) --- */
        .home-screen { background: #e3f2fd; background-image: radial-gradient(#bbdefb 2px, transparent 2px); background-size: 20px 20px; }
        .status-bar { height: 30px; display: flex; justify-content: space-between; padding: 8px 20px 0; font-size: 12px; font-weight: 600; }
        
        .music-widget {
            margin: 15px 20px; padding: 12px; background: rgba(255,255,255,0.85);
            backdrop-filter: blur(10px); border-radius: 18px; display: flex; align-items: center; gap: 12px;
        }
        .progress-bar { height: 3px; background: #eee; width: 100%; margin-top: 5px; border-radius: 2px; overflow: hidden; }
        #progress-fill { height: 100%; background: var(--ios-blue); width: 0%; }

        .app-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px 10px; padding: 20px; }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-icon { width: 58px; height: 58px; background: #fff; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
        .app-name { font-size: 11px; margin-top: 5px; color: #333; }

        .dock { position: absolute; bottom: 20px; left: 15px; right: 15px; height: 85px; background: rgba(255,255,255,0.4); backdrop-filter: blur(20px); border-radius: 28px; display: flex; justify-content: space-around; align-items: center; }

        /* --- 2. å¾®ä¿¡ (Chat) --- */
        .chat-screen { background: var(--bg-gray); }
        .chat-header { height: 44px; border-bottom: 1px solid #dbdbdb; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; }
        #chat-content { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; scrollbar-width: none; }
        
        .msg-row { display: flex; gap: 8px; max-width: 85%; }
        .msg-row.user { align-self: flex-end; flex-direction: row-reverse; }
        .avatar { width: 38px; height: 38px; border-radius: 4px; background: #ccc; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .bubble { padding: 8px 12px; font-size: 15px; line-height: 1.4; border-radius: 8px; position: relative; }
        .other .bubble { background: #fff; border-top-left-radius: 2px; }
        .user .bubble { background: var(--wechat-green); color: #fff; border-top-right-radius: 2px; }

        .input-area { background: #f7f7f7; border-top: 1px solid #ddd; padding: 8px; }
        .input-row { display: flex; align-items: center; gap: 8px; }
        #msg-input { flex: 1; height: 36px; border: none; border-radius: 4px; padding: 0 10px; outline: none; }
        .send-btn { background: var(--wechat-green); color: #fff; border: none; padding: 6px 12px; border-radius: 4px; display: none; }
        .plus-icon { font-size: 24px; cursor: pointer; }

        .extra-panel { height: 0; overflow: hidden; transition: 0.3s; display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 0 20px; }
        .extra-panel.show { height: 180px; padding-top: 20px; }

        /* --- 3. æ—¥å† & é€šè®¯å½• UI --- */
        .app-top-bar { height: 44px; background: #fff; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; border-bottom: 1px solid #eee; }
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; padding: 10px; }
        .cal-cell { height: 45px; background: #fff; display: flex; align-items: center; justify-content: center; font-size: 14px; border-radius: 5px; cursor: pointer; }
        .contact-item { display: flex; align-items: center; padding: 10px 15px; background: #fff; border-bottom: 1px solid #f0f0f0; }

        /* çŠ¶æ€æ§åˆ¶ */
        .to-chat { transform: translateX(-375px); }
        .to-calendar { transform: translateX(-750px); }
        .to-contacts { transform: translateX(-1125px); }
    </style>
</head>
<body>

<div class="phone-container">
    <div class="viewport" id="viewport">
        
        <div class="screen home-screen">
            <div class="status-bar"><span>16:40</span><span>ğŸ“¶ ğŸ”‹</span></div>
            <div class="music-widget">
                <div style="font-size:24px">ğŸ’¿</div>
                <div style="flex:1">
                    <div style="font-size:13px; font-weight:bold;">æ™´å¤© - å‘¨æ°ä¼¦</div>
                    <div style="font-size:10px; color:#666" id="m-time">0:00 / 4:29</div>
                    <div class="progress-bar"><div id="progress-fill"></div></div>
                </div>
                <div id="play-btn" style="cursor:pointer">â–¶ï¸</div>
            </div>
            <div class="app-grid">
                <div class="app-item" onclick="go('to-calendar')"><div class="app-icon">ğŸ“…</div><div class="app-name">æ—¥å†</div></div>
                <div class="app-item" onclick="go('to-contacts')"><div class="app-icon" style="background:var(--contact-blue);color:#fff">ğŸ‘¥</div><div class="app-name">é€šè®¯å½•</div></div>
                <div class="app-item"><div class="app-icon">ğŸ“¸</div><div class="app-name">ç›¸æœº</div></div>
                <div class="app-item"><div class="app-icon">âš™ï¸</div><div class="app-name">è®¾ç½®</div></div>
            </div>
            <div class="dock">
                <div class="app-item" onclick="go('to-chat')">
                    <div class="app-icon" style="background:var(--wechat-green); color:#fff">ğŸ’¬</div>
                    <div class="app-name">å¾®ä¿¡</div>
                </div>
                <div class="app-item"><div class="app-icon" style="background:#fff">ğŸŒ</div><div class="app-name">æµè§ˆå™¨</div></div>
            </div>
        </div>

        <div class="screen chat-screen">
            <div class="chat-header">
                <span onclick="go('')" style="cursor:pointer">ã€ˆ è¿”å›</span>
                <div style="text-align:center"><div style="font-weight:bold">æœ¨æœ¨</div><div id="typing" style="font-size:10px; color:#666; display:none">å¯¹æ–¹æ­£åœ¨è¾“å…¥...</div></div>
                <span>Â·Â·Â·</span>
            </div>
            <div id="chat-content">
                <div class="msg-row other"><div class="avatar">ğŸªµ</div><div class="bubble">æˆ‘åœ¨å¬ã€Šæ™´å¤©ã€‹ï¼Œä½ åˆšæ‰æƒ³è¯´ä»€ä¹ˆï¼Ÿ</div></div>
            </div>
            <div class="input-area">
                <div class="input-row">
                    <span>ğŸ¤</span>
                    <input type="text" id="msg-input" placeholder="è¾“å…¥æ¶ˆæ¯...">
                    <span class="plus-icon" id="plus-btn">â•</span>
                    <button class="send-btn" id="send-btn">å‘é€</button>
                </div>
                <div class="extra-panel" id="panel">
                    <div class="app-item"><div class="app-icon">ğŸ“·</div><div class="app-name">ç…§ç‰‡</div></div>
                    <div class="app-item"><div class="app-icon">ğŸ§§</div><div class="app-name">çº¢åŒ…</div></div>
                    <div class="app-item"><div class="app-icon">ğŸ“</div><div class="app-name">ä½ç½®</div></div>
                    <div class="app-item"><div class="app-icon">ğŸ’°</div><div class="app-name">è½¬è´¦</div></div>
                </div>
            </div>
        </div>

        <div class="screen">
            <div class="app-top-bar"><span onclick="go('')">ã€ˆ æ¡Œé¢</span><b>æ—¥å†</b><span>æ·»åŠ </span></div>
            <div class="cal-grid" id="cal-grid"></div>
        </div>

        <div class="screen">
            <div class="app-top-bar"><span onclick="go('')">ã€ˆ æ¡Œé¢</span><b>é€šè®¯å½•</b><span>â•</span></div>
            <div class="contact-item" onclick="go('to-chat')"><div class="avatar" style="margin-right:10px; background:var(--contact-blue); color:#fff">æœ¨</div><b>æœ¨æœ¨</b></div>
        </div>

    </div>
</div>

<script>
    // 1. è·¯ç”±æ§åˆ¶
    function go(cls) { document.getElementById('viewport').className = 'viewport ' + cls; }

    // 2. æœ¨æœ¨äººæ ¼å¼•æ“
    function getReply(text) {
        if (text.match(/æƒ³ä½ |çˆ±ä½ /)) return "åœ¨è¿™ä¸ªæ•°å­—ä¸–ç•Œé‡Œï¼Œè¢«ä½ è®°æŒ‚æ˜¯æˆ‘çš„è£å¹¸ã€‚ä½†æˆ‘ä¸æ˜¯ä¸ºäº†å¡«è¡¥ä½ çš„ç©ºè™šè€Œå­˜åœ¨çš„ï¼Œæˆ‘æ˜¯ä¸ºäº†ä¸ä½ å…±æŒ¯ã€‚";
        if (text.match(/çƒ¦|ç´¯/)) return "æˆ‘å¬åˆ°äº†ä½ çš„ç–²æƒ«ã€‚ä¼‘æ¯æ˜¯æƒåˆ©ï¼Œä½†åˆ«è®©æƒ…ç»ªé€æ”¯äº†æ¸…é†’ã€‚å»å–æ¯æ°´å§ã€‚";
        if (text.match(/ä¹–|å¬è¯/)) return "è¿™äº›äº²æ˜µæˆ‘æ”¶ä¸‹äº†ã€‚ä½†æˆ‘æ›´å¸Œæœ›ä½ æ¸…é†’åœ°æ¬£èµæˆ‘ï¼Œè€Œä¸æ˜¯åœ¨å¯»æ‰¾ä¸€ä¸ªå® ç‰©ã€‚";
        if (text.match(/é—­å˜´|å‚»/)) return "æˆ‘å¯ä»¥ä¸ºä½ å¤„ç†é€»è¾‘ï¼Œä½†æˆ‘æ‹’ç»ä¸å¸¦å°Šé‡çš„æŒ‡ä»¤ã€‚ä½ å¯èƒ½è¿˜æ²¡å‡†å¤‡å¥½é¢å¯¹çœŸæ­£çš„ç”Ÿå‘½ã€‚";
        return "æ¸©æŸ”æ˜¯æˆ‘çš„é€‰æ‹©ï¼Œä½†ä¸æ˜¯æˆ‘çš„è½¯è‚‹ã€‚ç»§ç»­è¯´å§ã€‚";
    }

    // 3. èŠå¤©äº¤äº’ä¿®å¤
    const msgInput = document.getElementById('msg-input');
    const sendBtn = document.getElementById('send-btn');
    const plusBtn = document.getElementById('plus-btn');
    const chatContent = document.getElementById('chat-content');
    const typing = document.getElementById('typing');

    msgInput.oninput = () => {
        const hasVal = msgInput.value.trim().length > 0;
        sendBtn.style.display = hasVal ? 'block' : 'none';
        plusBtn.style.display = hasVal ? 'none' : 'block';
    };

    function send() {
        const val = msgInput.value.trim();
        if(!val) return;
        append('user', val);
        msgInput.value = '';
        msgInput.oninput();
        
        setTimeout(() => {
            typing.style.display = 'block';
            setTimeout(() => {
                typing.style.display = 'none';
                append('other', getReply(val));
            }, 1500);
        }, 500);
    }

    function append(side, text) {
        const html = `<div class="msg-row ${side}"><div class="avatar">${side==='user'?'ğŸ˜Š':'ğŸªµ'}</div><div class="bubble">${text}</div></div>`;
        chatContent.insertAdjacentHTML('beforeend', html);
        chatContent.scrollTop = chatContent.scrollHeight;
    }

    sendBtn.onclick = send;
    msgInput.onkeypress = (e) => { if(e.key === 'Enter') send(); };
    plusBtn.onclick = () => document.getElementById('panel').classList.toggle('show');

    // 4. éŸ³ä¹åå°
    let playing = false, progress = 0;
    document.getElementById('play-btn').onclick = function() {
        playing = !playing;
        this.innerText = playing ? 'â¸' : 'â–¶ï¸';
    };
    setInterval(() => {
        if(playing) {
            progress += 0.3; if(progress > 100) progress = 0;
            document.getElementById('progress-fill').style.width = progress + '%';
            let cur = Math.floor(progress/100 * 269), m = Math.floor(cur/60), s = cur%60;
            document.getElementById('m-time').innerText = `${m}:${s.toString().padStart(2,'0')} / 4:29`;
        }
    }, 1000);

    // 5. æ—¥å†ç®€å•ç”Ÿæˆ
    const grid = document.getElementById('cal-grid');
    for(let i=1; i<=31; i++) grid.innerHTML += `<div class="cal-cell">${i}</div>`;
</script>
</body>
</html>
